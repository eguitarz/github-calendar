!function(){"use strict";var a,b,c,d,e,f,g,h,i,j,k;a="https://api.github.com/users",h=1,g=[],d={},k=0,this.Date.prototype.format=function(){return this.getUTCFullYear()+"-"+(this.getUTCMonth()+1)+"-"+this.getUTCDate()},this.Date.prototype.getWeek=function(){var a,b;return a=new Date(this.getTime()),b=new Date(a.getUTCFullYear(),0,1),a.setDate(a.getUTCDate()+b.getUTCDay()),Math.ceil((a-b)/1e3/60/60/24/7)},b=function(a,b){var c,d,e;return c=new Date(a.getTime()),c.setUTCHours(0),c.setUTCMinutes(0),c.setUTCSeconds(0),d=new Date(b.getTime()),d.setUTCHours(0),d.setUTCMinutes(0),d.setUTCSeconds(0),e=Math.abs(c-d),floor(e/1e3/60/60/24)},f=function(a,b){return a.getUTCFullYear()===b.getUTCFullYear()&&a.getUTCMonth()===b.getUTCMonth()&&a.getUTCDate()===b.getUTCDate()},j=function(a){var b,c,d,e,f,g;for(e={0:"Jan",1:"Feb",2:"Mar",3:"Apr",4:"May",5:"Jun",6:"Jul",7:"Aug",8:"Sep",9:"Oct",10:"Nov",11:"Dec"},b=(new Date).getUTCMonth(),c=g=0;12>=g;c=++g)d=(b+c)%12,f=45*c,a.text(f+26,5,e[d]);return a.text(4,31,"M"),a.text(4,53,"W"),a.text(4,76,"F")},i=function(a,b,c,d){var e,f,g,h,i,j=this;return g="#8cc665",h="#d6e685",f="#44a340",e="#1e6823",i=a.rect(11*c+15,11*b+15,10,10),d.commitsLength>0&&d.commitsLength<3?i.attr("fill",h):d.commitsLength>=3&&d.commitsLength<6?i.attr("fill",g):d.commitsLength>=6&&d.commitsLength<8?i.attr("fill",f):d.commitsLength>=8?i.attr("fill",e):i.attr("fill","#ccc"),i.attr("stroke-opacity","0"),i.hover(function(){return $(j).find(".brief").html('<div style="text-align:left;float:left">'+d.created_at.format()+"</div>"),$(j).find(".brief").append('<div style="text-align:right;">'+d.commitsLength+" commits</div>"),$(j).find(".brief").css("opacity",1),$(j).find(".description").css("opacity",1),$(j).find(".description").html(""),!!d.commits&&d.commits.forEach(function(a){return $(j).find(".description").append('<li style="text-overflow:ellipsis;overflow:hidden;padding:5px 10px;">'+d.repo.name+" - "+a.message+"</li>")}),i.attr("stroke-opacity","1")},function(){return $(j).find(".brief").css("opacity",0),$(j).find(".description").css("opacity",0),i.attr("stroke-opacity","0")})},c=function(a){var b,c,e,f,h,k,l;for(j.call(this,a),l=[],f=h=0,k=g.length;k>h;f=++h)e=g[f],d.hasOwnProperty(e.created_at.format())&&(c=d[e.created_at.format()],b=c.payload.commits?c.payload.commits.length:0,e.commitsLength=b,c.payload.commits&&(e.commits=c.payload.commits),c.repo&&(e.repo=c.repo),e.created_at=new Date(c.created_at)),l.push(i.call(this,a,f%7,Math.floor(f/7),e));return l},e=function(a,b){var e;return e=Raphael($(b).offset().left,$(b).offset().top+40,600,100),a.forEach(function(a){var b,c,e,f,g;return(f=a.payload).commits||(f.commits=[]),b=a.payload.commits?a.payload.commits.length:0,c=new Date(a.created_at),e=c.format("yyyy-mm-dd"),d[e]?a.payload.commits.forEach(function(a){return d[e].payload.commits?d[e].payload.commits.push(a):void 0}):d[e]=a,(g=d[e].payload).commits||(g.commits=[])}),k+=1,10===k?(console.log("draw...."),c.call(b,e)):void 0},$.fn.calendar=function(b){var c,d;return d=b.user||"eguitarz",c=[1,2,3,4,5,6,7,8,9,10].map(function(b){return a+"/"+d+"/events?page="+b}),this.each(function(){var a,b,d,f,h,i;for(b=this,$(this).append($('<div class="brief" style="-webkit-transition:opacity 300ms;-moz-transition:opacity 300ms;background-color:#ddd;z-index:999;width:580px;padding:5px 10px;border-radius:5px;opacity:0">')),$(this).append($('<ul class="description" style="-webkit-transition:opacity 300ms;-moz-transition:opacity 300ms;background-color:#ddd;z-index:999;width:600px;overflow:hidden;border-radius:5px;white-space:nowrap;padding:0;list-style-type:none;margin-top:115px">')),h=new Date,d=364+h.getUTCDay(),f=i=0;d>=0?d>=i:i>=d;f=d>=0?++i:--i)a=new Date(h.getTime()),a.setDate(h.getUTCDate()-f),g.unshift({created_at:a,commitsLength:0});return c.forEach(function(a){return $.get(a).done(function(a){return e(a,b)})})})}}.call(this);